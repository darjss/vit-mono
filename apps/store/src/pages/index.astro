---
import ProductCard from "@/components/product-card.astro";
import Layout from "../layouts/Layout.astro";
import api from "../utils/trpc";
import { Button } from "@workspace/ui/components/button";

const message = await api.cart.hello.query({ text: "fjiowf ewomf" });
const products = await api.product.getFeauturedProducts.query();
console.log(message);
---

<Layout>
  <div class="flex justify-center flex-col">
    <h1>Home page</h1>
    <p>{message.greeting}</p>
    <div class="bg-main h-10 w-10 rounded-full">Hello</div>
    <Button client:load onClick={() => console.log("hello")}>Hello</Button>

    <h2 class="text-2xl font-bold text-foreground">Products</h2>
    <div class="flex flex-wrap gap-4 justify-center">
      {
        products.map((product) => (
          <ProductCard
            product={{
              id: product.id + "",
              name: product.name,
              price: product.price,
              image: product.image,
            }}
          />
        ))
      }
    </div>
  </div>
</Layout>
