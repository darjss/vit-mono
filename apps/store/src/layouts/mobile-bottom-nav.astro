---
import Category from "@/icons/category.astro";
import Home from "@/icons/home.astro";
import Product from "@/icons/product.astro";
import Profile from "@/icons/profile.astro";

// src/components/MobileBottomNav.astro

// Define props the component accepts
interface Props {
  currentPage: string; // e.g., Astro.url.pathname
}

const { currentPage } = Astro.props;

// Define navigation items
const navItems = [
  { href: "/", label: "Нүүр", Icon: Home },
  { href: "/categories", label: "Ангилал", Icon: Category },
  { href: "/products", label: "Бүтээгдэхүүн", Icon: Product },
  { href: "/profile", label: "Профайл", Icon: Profile },
];

// Helper function to check if a link is active
// Handles the base case "/" matching only exactly
const isActive = (itemPath: string, currentPath: string) => {
  if (itemPath === "/") {
    return currentPath === "/";
  }
  // For other paths, check if the current path starts with the item path
  // e.g., /categories/shoes should activate the /categories tab
  return currentPath.startsWith(itemPath);
};
---

<nav
  class="fixed bottom-0 left-0 right-0 z-50 h-16 border-t border-gray-200 bg-white md:hidden"
>
  <div class="grid h-full grid-cols-4 font-medium">
    {
      navItems.map((item) => (
        <a
          href={item.href}
          class:list={[
            "group inline-flex flex-col items-center justify-center px-3 pt-1.5 pb-1 hover:bg-gray-50",
            isActive(item.href, currentPage)
              ? "text-main" // Active color
              : "text-gray-500 hover:text-gray-700", // Inactive color
          ]}
        >
          <item.Icon
            class:list={[
              "mb-1 h-5 w-5",
              isActive(item.href, currentPage)
                ? "text-main" // Active icon color
                : "text-gray-500 group-hover:text-gray-700", // Inactive icon color
            ]}
          />
          <span class="text-xs">{item.label}</span>
        </a>
      ))
    }
  </div>
</nav>
