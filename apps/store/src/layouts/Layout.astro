---
import Header from "@/layouts/Header.astro";
import Footer from "@/layouts/Footer.astro";
import { ClientRouter } from "astro:transitions";
import "../styles/global.css";
import MobileBottomNav from "./mobile-bottom-nav.astro";

// import "@workspace/ui/styles/globals.css"
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>Vitamin store</title>
    <ClientRouter fallback="animate" />
    <script>
      // Add view transition events to handle page transitions
      document.addEventListener('astro:page-load', () => {
        // Reinitialize any client-side JS that needs to run after page transition
      });
      
      document.addEventListener('astro:after-swap', () => {
        // Apply any state immediately after the DOM has been swapped
        window.scrollTo({ left: 0, top: 0, behavior: "instant" });
      });
    </script>
  </head>
  <body>
    <Header transition:persist />
    <main class="pt-[48px] md:pt-[72px] w-full">
      <slot />
    </main>
    <MobileBottomNav currentPage={Astro.url.pathname} transition:persist />
    <Footer transition:persist />
    <style is:global>
      body {
        padding-bottom: 5rem; /* Space for mobile bottom nav */
      }
      @media (min-width: 768px) {
        body {
          padding-bottom: 0; /* Remove bottom padding on desktop */
        }
      }

      /* View Transitions animations */
      ::view-transition-old(root),
      ::view-transition-new(root) {
        animation: none;
        mix-blend-mode: normal;
      }

      /* Slide animation */
      /* @keyframes slide-in {
        from {
          opacity: 0;
          transform: translateX(100%);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes slide-out {
        from {
          opacity: 1;
          transform: translateX(0);
        }
        to {
          opacity: 0;
          transform: translateX(-100%);
        }
      } */
    </style>
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
    max-width: 100vw;
    height: 100%;
    overflow-x: hidden;
  }
</style>
