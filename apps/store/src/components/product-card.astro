---
import { slugify } from "@/lib/utils";
import type { ProductCard } from "../lib/types";
interface Props {
  product: ProductCard;
}

const { product } = Astro.props;
const productSlug = slugify(product.name);
const productId = String(product.id);
const productUrl = `/product/${productSlug}-${productId}`;
---
<a href={productUrl} class="product-card-link">
    <div
    class="group relative mx-auto flex w-[160px] flex-col overflow-hidden rounded-lg border border-border bg-card p-3 shadow-[3px_3px_0_0_var(--border)] transition-all hover:shadow-[5px_5px_0_0_var(--border)] sm:w-[180px] md:w-[200px]"
    >
    <div class="aspect-square w-full overflow-hidden bg-gray-200 rounded-md">
        <img
        src={product.image}
        alt={product.name}
        class="h-full w-full object-cover object-center transition-opacity group-hover:opacity-90"
        transition:name={`product-image-${productId}`}
        />
    </div>
    <div class="mt-3 flex flex-1 flex-col space-y-2">
        <h3 class="text-sm font-semibold text-foreground line-clamp-2 truncate" 
            transition:name={`product-name-${productId}`}>
            {product.name}
        </h3>
        <div class="flex items-center justify-between">
            <p class="text-sm font-medium text-foreground" 
               transition:name={`product-price-${productId}`}>
                ${product.price.toFixed(2)}
            </p>
        </div>
    </div>
</div>
</a>

<style>
  .product-card-link {
    display: block;
    transform: translateZ(0); /* Force GPU acceleration */
  }
</style>

